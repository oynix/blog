<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="避免没有计划的行动">
<meta property="og:type" content="website">
<meta property="og:title" content="oynix">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="oynix">
<meta property="og:description" content="避免没有计划的行动">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="oynix">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>oynix</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">oynix</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">github这个域名也挺好</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/oynix" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/f07f2aa62201/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="oynix">
      <meta itemprop="description" content="避免没有计划的行动">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="oynix">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/f07f2aa62201/" class="post-title-link" itemprop="url">Program type already present: org.iq80.leveldb.CompressionType</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-08-07 10:56:07" itemprop="dateCreated datePublished" datetime="2018-08-07T10:56:07+08:00">2018-08-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>626</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>今天在Android Studio添加了一个新的依赖：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation (&quot;org.ethereum:ethereumj-core:$ethereumj_version&quot;)</span><br></pre></td></tr></table></figure>
<p>然后<code>Sync</code>可以通过，但是<code>Rebuild</code>报错如标题，往上搜了几个方法都未奏效，最后只好顺着问题找答案。</p>
<p>报错的内容就是说<code>CompressionType</code>重复了，换句话说，添加的新依赖不添加这个即可。双击<code>Shift</code>全局搜索<code>CompressionType</code>定位，如图：<br><img src="https://i.loli.net/2021/07/07/nOSFvNhZ4BTgCmE.png"></p>
<p>添加依赖时增加：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">implementation (&quot;org.ethereum:ethereumj-core:$ethereumj_version&quot;) &#123;</span><br><span class="line">       exclude group: &#x27;org.iq80.leveldb&#x27;, module: &#x27;leveldb-api&#x27;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p><code>Sync</code>通过，<code>Rebuild</code>又报新错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">More than one file was found with OS independent path &#x27;META-INF/spring.tooling&#x27;</span><br></pre></td></tr></table></figure>
<p>在<code>android</code>节点增加配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">	packagingOptions &#123;</span><br><span class="line">        pickFirst &#x27;META-INF/*&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>继续<code>Sync</code>，通过；<code>Rebuild</code>，通过。</p>
<p>问题解决。</p>
<p>(完)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/a8ab36581124/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="oynix">
      <meta itemprop="description" content="避免没有计划的行动">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="oynix">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/a8ab36581124/" class="post-title-link" itemprop="url">[翻译]种子词</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-08-02 00:45:41" itemprop="dateCreated datePublished" datetime="2018-08-02T00:45:41+08:00">2018-08-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>原文地址：<a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Seed_phrase">https://en.bitcoin.it/wiki/Seed_phrase</a></p>
</blockquote>
<h3 id="种子短语"><a href="#种子短语" class="headerlink" title="种子短语"></a>种子短语</h3><p>种子短语、种子恢复短语或备用种子短语是存储恢复比特币钱包所需的所有信息的单词列表。钱包软件通常会生成一个种子短语并指示用户将其写在纸上。如果用户的电脑坏了或者他们的硬盘坏了，他们可以再次下载相同的钱包软件，使用纸质备份来取回他们的比特币。</p>
<p>任何发现这个短语的人都可以偷比特币，所以比特币必须保存的像珠宝或现金一样安全。例如，它不能被键入任何网站。</p>
<p>种子短语是备份和存储比特币的好方法，因此几乎所有受好评的钱包都使用它们</p>
<h4 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h4><p>种子短语的一个例子是:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">witch collapse practice feed shame open despair creek road again ice least</span><br></pre></td></tr></table></figure>
<p>单词的顺序是很重要的。</p>
<h4 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h4><p>关于种子短语如何工作的一个简单的解释是，钱包软件有一个从字典中提取的单词列表，每个单词被分配给一个数字。种子短语可以转换为一个数字，该数字用作种子整数，以生成钱包中使用的所有密钥对的确定性钱包。</p>
<p>BIP39标准2048字的英文词库,如果这个词只包含12个随机的单词,可能的组合的数量将是2048 ^ 12 = 2 ^ 132，并且短语有132位安全性。但是，BIP39短语中的一些数据不是随机的，所以12个单词的BIP39种子短语的实际安全性只有128位。这与所有比特币私钥的强度大致相同，因此大多数专家认为它足够安全。</p>
<p>发明你自己的种子短语并不安全，因为人类不善于产生随机性。最好的方法是让钱包软件生成你写下的短语。</p>
<h4 id="双重种子短语"><a href="#双重种子短语" class="headerlink" title="双重种子短语"></a>双重种子短语</h4><p>种子短语和所有备份一样，可以存储任意数量的比特币。这是一个令人担忧的想法，可能有足够购买整个建筑的钱，却只是写在一张纸上而没有任何保护。由于这个原因，许多钱包使得用密码加密种子短语成为可能。</p>
<p>密码可用于创建一个双因素种子短语，其中需要“你拥有的东西”和“你知道的东西”才能解锁比特币。</p>
<p>它的工作原理是钱包创建一个种子短语并向用户询问密码。然后需要种子短语和额外的单词，才能恢复钱包。Electrum和其他一些钱包把密码短语叫做“种子扩展”，“扩展词”或者“第13 /25个单词”。BIP39标准定义了一种保护种子短语的方法。在Electrum标准中也使用了类似的方案。如果没有密码，则使用空字符串“”。</p>
<p>警告:忘记这个密码将导致比特币钱包和任何钱包里包含的钱丢失。不要高估你记住密码的能力，尤其是当你可能不经常使用密码的时候。</p>
<p>警告:种子短语密码不应该与用于加密磁盘上钱包文件的密码混淆。这可能就是为什么许多钱包称它为扩展词而不是密码。</p>
<h4 id="诱骗的钱包"><a href="#诱骗的钱包" class="headerlink" title="诱骗的钱包"></a>诱骗的钱包</h4><p>这个功能还提供了貌似合理的可否认性，因为每个密码都会生成一个有效的钱包，但只有正确的密码才会让你想要的钱包可用。您可以创建一个具有相同种子短语但不同密码的诱骗钱包，如果身体上被迫，那么只显示第一个密码，并将第二个密码保密。</p>
<p>另一方面，强迫你的实体可能已经知道诱骗钱包的概念。他们可以继续打你，直到你放弃两三个密码。</p>
<p>关于这个问题的更长的讨论，请参见存储比特币# 5美元扳手攻击</p>
<h4 id="长期储存种子短语"><a href="#长期储存种子短语" class="headerlink" title="长期储存种子短语"></a>长期储存种子短语</h4><p>大多数人在纸上写下短语，但也可以用许多其他的方式来存储，比如记忆、雕刻金属、在书页空白处写字、刻石碑或任何其他有创意的方式。</p>
<p>用铅笔在纸上书写要比用钢笔书写好得多。纸张应无酸味或档案纸，存放在黑暗中，避免高温和潮湿。</p>
<p>有些人想把他们的短语分开。在一个地方储存6个单词，在另一个地方储存6个单词。这是一个糟糕的想法，不应该这样做，因为如果一组6个单词被发现，那么就更容易对剩下的短语进行暴力攻击。像这样在多个地方存储比特币应该通过多签名钱包来实现。</p>
<p>另一个坏主意是添加一些对你有意义的随机假词，然后把它们删除，只留下12个单词短语。这个短语来自于一本已知的字典(见下一节)，所以任何人都可以用那本字典来除去假词。</p>
<p>在同一张纸上写一些解释的词，这可能是个好主意。如果长期储存，你可能会忘记一个短语应该如何处理。可以加以修改的示例解释是:</p>
<pre><code>这十二个字控制着比特币。保管好这张纸，像现金或珠宝一样保密。本文中的比特币信息用密码加密。它是一个多  签名钱包的一部分，是在2012年1月1日由电子比特币钱包软件制作的。
</code></pre>
<h4 id="单词列表"><a href="#单词列表" class="headerlink" title="单词列表"></a>单词列表</h4><p>一般来说，种子短语只适用于创建它的相同的钱包软件。如果储存的时间很长，最好也写上钱包的名字。</p>
<p>BIP39英语单词表中，每个单词都由前四个字母唯一地识别出来，这在空间有限的情况下是很有用的。</p>
<h4 id="替代的名字“助记词”"><a href="#替代的名字“助记词”" class="headerlink" title="替代的名字“助记词”"></a>替代的名字“助记词”</h4><p>种子短语有时被称为“助记短语”，特别是在古老的文学作品中。这是一个不好的名字，因为单词助记意味着这个短语应该被记住。把它们叫做种子短语没有那么误导人。</p>
<p>(完)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/97037d409735/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="oynix">
      <meta itemprop="description" content="避免没有计划的行动">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="oynix">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/97037d409735/" class="post-title-link" itemprop="url">[翻译]比特币确定性钱包</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-08-01 23:32:02" itemprop="dateCreated datePublished" datetime="2018-08-01T23:32:02+08:00">2018-08-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>原文地址：<a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Deterministic_wallet">https://en.bitcoin.it/wiki/Deterministic_wallet</a></p>
</blockquote>
<h3 id="确定性钱包"><a href="#确定性钱包" class="headerlink" title="确定性钱包"></a>确定性钱包</h3><p>确定性钱包是一种系统，从一个被称为种子的单一起点获取密钥。种子允许用户在不需要任何其他信息的情况下轻松备份和恢复钱包，在某些情况下，用户可以在不知道私钥的情况下创建公共地址。种子通常被串行化为人类可读的字词。</p>
<h4 id="好处"><a href="#好处" class="headerlink" title="好处"></a>好处</h4><p>早期的客户端，如Satoshi客户端，会生成一个新的随机私钥缓冲区，在将来用作接收和更改地址。在短时间内耗尽密钥池缓冲区(通常是100个地址)后，这将使备份失效。确定性钱包可以在动态中产生无限数量的地址，因此不会受到这个问题的影响。由于地址是以一种已知的方式生成的，而不是随机生成的，一些客户端可以在多个设备上使用，而不会造成资金损失。用户可以方便地以人类可读的格式创建种子的单个备份，这种格式将持续钱包的使用寿命，而不必担心这种备份会变得过时。<br>特定类型的确定性钱包(BIP0032, Armory, Coinkite和Coinb)额外允许完全分离私有和公共密钥的创建，以获得更大的安全性和方便性。在这个模型中，服务器可以设置为只知道特定确定性钱包的主公钥。这允许服务器创建尽可能多的公钥来接收资金，但是MPK协议不会允许攻击者从钱包中花钱。它们也可以在Electrum和Armory中使用，以实现完全离线存储和花费，离线计算机知道私钥，而在线的计算机只知道MPK。通过USB存储器，两种计算机之间可以通过USB存储器进行交易，避免将离线计算机暴露给基于网络的攻击。<br>由硬件钱包(TREZOR)实现的确定性钱包将生成的私钥保持离线状态，即使花钱时也不将它们暴露给计算机。</p>
<h4 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h4><h4 id="类型1-确定性钱包"><a href="#类型1-确定性钱包" class="headerlink" title="类型1 确定性钱包"></a>类型1 确定性钱包</h4><p>类型1确定性钱包是一种从已知的起始字符串生成地址的简单方法，因此它不允许高级功能，如主公钥。要生成一个私钥，需要使用SHA256(string + n)，其中n是一个ascii编码的数字，它从1开始，并随着需要额外的键而增加。<br>这种类型的钱包可以由Casascius比特币地址实用程序创建。</p>
<h4 id="类型2-分层确定性钱包"><a href="#类型2-分层确定性钱包" class="headerlink" title="类型2 分层确定性钱包"></a>类型2 分层确定性钱包</h4><p>这种钱包类型在bip0032中进行了描述，并在TREZOR、Electrum和CarbonWallet中得到了充分的实现。种子是一个随机的128位值，用户可以使用常用的英语单词作为12个单词的种子短语。该种子在10万轮SHA256之后使用，以减缓对弱用户选择字符串的攻击。<br>这种钱包类型的最初描述和工作原理都归功于格雷戈里·麦克斯韦。</p>
<h4 id="Armory确定性钱包"><a href="#Armory确定性钱包" class="headerlink" title="Armory确定性钱包"></a>Armory确定性钱包</h4><p>Armory有自己基于“根键”和“链码”的2型确定性钱包格式。早期版本的Armory需要备份“根键”和“链码”，而较新的版本则以不可逆转的方式从私钥派生链码。这些新的Armory(0.89+)只需要一个256位的根键。这种旧格式打算逐步淘汰，以支持标准BIP0032格式。</p>
<p>(完)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/6dcc04b57a51/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="oynix">
      <meta itemprop="description" content="避免没有计划的行动">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="oynix">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/6dcc04b57a51/" class="post-title-link" itemprop="url">[翻译]Bitcoin Address介绍</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-08-01 22:33:23" itemprop="dateCreated datePublished" datetime="2018-08-01T22:33:23+08:00">2018-08-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>原文地址: <a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Address">https://en.bitcoin.it/wiki/Address</a></p>
</blockquote>
<h2 id="地址"><a href="#地址" class="headerlink" title="地址"></a>地址</h2><p>一个比特币地址或是一个简单地址，是一个26-35个字母或数字组成的标识符，以数字1或3开头，这代表了比特币支付的可能目的地。任何比特币的使用者不需要任何话费便可以生成地址。例如使用Bitcoin Core客户端，点击“New Address“就会被分配一个地址。通过一个交易所账号或者在线钱包服务来获得比特币地址也是可能的。目前正被使用中的地址有3种格式：</p>
<ol>
<li>P2PKH类型，以数字<code>1</code>开头，例如：<code>1BvBMSEYstWetqTFn5Au4m4GFg7xJaNVN2</code>.</li>
<li>P2SH类型，以数字<code>3</code>开头，例如：<code>3J98t1WpEZ73CNmQviecrnyiWrnqRhWNLy</code>.</li>
<li>Bech32类型，以<code>bc1</code>开头，例如：<code>bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf5mdq</code>.</li>
</ol>
<h4 id="比特币地址是一个一次性的令牌"><a href="#比特币地址是一个一次性的令牌" class="headerlink" title="比特币地址是一个一次性的令牌"></a>比特币地址是一个一次性的令牌</h4><p>就像e-mail地址，你可以通过向一个人比特币地址中的一个地址发送比特币来实现给这个人发送比特币。然而，和e-mail地址不同的是，一个人可以拥有很多比特币地址，每一次交易应该使用一个唯一的地址。大多数比特币软件和网站都会帮助你在每次创建发票或付款请求时生成一个全新的地址。</p>
<h4 id="地址可以离线创建"><a href="#地址可以离线创建" class="headerlink" title="地址可以离线创建"></a>地址可以离线创建</h4><p>创建地址无需互联网连接，也不需要与比特币网络进行任何联系或注册。可以使用免费的软件工具创建大量离线地址。生成大量地址在几个场景很有用，比如电子商务网站，为每个选择“用比特币支付”选项的客户提供一个唯一的预先生成的地址。较新的“HD钱包”可以生成一个“种子”令牌，可以用来让不受信任的系统(如webservers)生成无限数量的地址，而无需花费接收到的比特币。</p>
<h4 id="地址通常是区分大小写和准确的"><a href="#地址通常是区分大小写和准确的" class="headerlink" title="地址通常是区分大小写和准确的"></a>地址通常是区分大小写和准确的</h4><p>旧式的比特币地址是大小写敏感的。比特币的地址应该尽可能地使用电脑的剪贴板复制和粘贴。如果你手工键入一个比特币地址，而每个字符都没有被准确地转录(包括大写)，那么不正确的地址很可能会被比特币软件拒绝。你必须检查你的条目，然后再试一次。一个输入错误的地址被接受为有效的概率是1 / 232，也就是大约1 / 42.9亿。新型bech32地址不区分大小写。</p>
<h4 id="证明你收到了一个地址"><a href="#证明你收到了一个地址" class="headerlink" title="证明你收到了一个地址"></a>证明你收到了一个地址</h4><p>大多数比特币钱包都有一个“签名”信息的功能，这可以证明接收资金的实体已经同意该信息。例如，这可以用于在支付合同之前，以一种加密的可验证的方式确定合同。<br>有些服务还将利用这种功能，只指定一个特定的地址进行身份验证，在这种情况下，该地址永远不应该用于实际的比特币交易。当您登录或使用他们的服务时，您将提供一个签名，证明您与预先商定的地址相同。<br>值得注意的是，这些签名仅仅证明一个人收到了一个地址。由于比特币交易没有“来自”地址，你无法证明你是资金的发送者。<br>目前的消息签名标准仅与“0版本”的比特币地址(以数字1开头)兼容。</p>
<h4 id="地址验证"><a href="#地址验证" class="headerlink" title="地址验证"></a>地址验证</h4><p>如果希望在应用程序中验证比特币地址，建议使用<a target="_blank" rel="noopener" href="https://bitcointalk.org/index.php?topic=1026.0">这个线程中</a>的方法，而不是只检查字符串长度、允许的字符，或者地址以1或3开头。验证还可以使用<a target="_blank" rel="noopener" href="http://rosettacode.org/wiki/Bitcoin/address_validation">各种语言</a>的开放源代码或使用<a target="_blank" rel="noopener" href="http://lenschulwitz.com/base58">在线验证工具</a>进行。</p>
<h4 id="多重签名的地址"><a href="#多重签名的地址" class="headerlink" title="多重签名的地址"></a>多重签名的地址</h4><p>可以创建需要多个私钥组合的地址。由于它们利用了较新的特性，所以它们以较新的前缀3而不是旧的1开始。这可以被看作是向两方开出支票——“支付给某人和其他人的订单”——双方必须在支票上签字以获得资金。<br>必须满足的实际需求(所需的私钥数量、相应的公钥等)是由生成此类地址的人预先决定的，一旦创建了地址，就不能在不生成新地址的情况下更改该需求。</p>
<h4 id="一个地址里有什么"><a href="#一个地址里有什么" class="headerlink" title="一个地址里有什么"></a>一个地址里有什么</h4><p>大多数比特币的地址是34个字符。它们由随机数字、大写字母和小写字母组成，除了大写字母“O”、大写字母“I”、小写字母“l”和数字“0”从未使用来避免视觉上的歧义。<br>一些比特币地址可以短于34个字符(少到26个字符)，但仍然有效。相当大比例的比特币地址只有33个字符，有些甚至可能更短。每个比特币地址代表一个数字。这些较短的地址是有效的，因为它们代表的是恰好以0开头的数字，当这些0被省略时，编码的地址就会变短。<br>比特币地址中有几个字符被用作校验和，因此可以自动查找和拒绝排版错误。校验和还允许比特币软件确认一个33个字符(或更短)的地址实际上是有效的，而不是一个缺少字符的地址。</p>
<h4 id="测试网络"><a href="#测试网络" class="headerlink" title="测试网络"></a>测试网络</h4><p>比特币Testnet上的地址是用不同的地址版本生成的，这会产生不同的前缀。有关详细信息，请参阅地址前缀和Testnet列表。</p>
<h3 id="误解"><a href="#误解" class="headerlink" title="误解"></a>误解</h3><h4 id="地址重用"><a href="#地址重用" class="headerlink" title="地址重用"></a>地址重用</h4><p>地址不打算被使用多次，这样做有许多相关的问题。有关地址重用的详细信息，请参阅专门的文章。</p>
<h4 id="地址余额"><a href="#地址余额" class="headerlink" title="地址余额"></a>地址余额</h4><p>地址不是钱包或账户，也没有余额。他们只收钱，而你在任何时候都不发送“从”地址。各种混乱的服务和软件显示’用一个地址接收比特币’,从随机不相关的交易中减去已发送的比特币作为一个’地址余额’,但这个数字是没有意义的:它并不意味着向这个地址发送的比特币的接收者已经花掉了它们，也不意味着他们仍然持有接收的比特币。<br>这种误解造成比特币损失的一个例子是，人们认为他们的地址包含3btc。他们花了0.5比特币，认为地址现在包含2.5比特币，而实际上它包含零比特币。剩余的2.5比特币被转移到一个没有备份的更改地址，因此丢失。这发生在一些使用纸质钱包的用户的场合。</p>
<h4 id="“从“地址"><a href="#“从“地址" class="headerlink" title="“从“地址"></a>“从“地址</h4><p>比特币交易没有任何来源——来源——或“来自”地址。有关“来自地址”的详细信息，请参阅专门的文章。</p>
<h4 id="地址图"><a href="#地址图" class="headerlink" title="地址图"></a>地址图</h4><p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-S43U7xMP-1625627005514)(<a target="_blank" rel="noopener" href="https://en.bitcoin.it/w/images/en/4/48/Address_map.jpg)]">https://en.bitcoin.it/w/images/en/4/48/Address_map.jpg)]</a></p>
<p>(完)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/6e2872c17d01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="oynix">
      <meta itemprop="description" content="避免没有计划的行动">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="oynix">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/6e2872c17d01/" class="post-title-link" itemprop="url">Linux服务器常用命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-07-29 23:53:41" itemprop="dateCreated datePublished" datetime="2018-07-29T23:53:41+08:00">2018-07-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>665</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="systemctl"><a href="#systemctl" class="headerlink" title="systemctl"></a>systemctl</h3><ul>
<li>systemctl status name.service<br> 查看某个服务的状态</li>
<li>systemctl | grep name-partern<br> 过滤显示所有服务名符合name-partern的服务</li>
<li>systemctl enable name.service<br> 设置开机自启</li>
<li>systemctl restart name.service<br>重启服务</li>
</ul>
<h3 id="journalctl"><a href="#journalctl" class="headerlink" title="journalctl"></a>journalctl</h3><ul>
<li>journalctl -f -u unit-name<br>实时查看某个服务的log</li>
<li>journalctl –since 18:34 –until 19:12 -u unit-name<br>查看某个服务在该时间段内的log</li>
<li>journactl –since ‘2018-07-29 19:00’ –until now -u unit-name<br>查看时间段内的日志</li>
</ul>
<h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><ul>
<li>grep -E ‘regex’<br>根据正则表达式过滤</li>
<li>grep -w ‘wrod’<br>根据单词word过滤</li>
<li>grep -c ‘target’<br>显示过滤后的行数</li>
</ul>
<h3 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h3><ul>
<li>tail -n 2000 file.name<br>显示文件末尾的2000行内容</li>
<li>tail -f file.name<br>实时显示文件最新追加的内容</li>
<li>tail -s 1<br>显示内容刷新时间间隔为1秒</li>
</ul>
<h3 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h3><ul>
<li>ls -l<br>以列表形式显示</li>
<li>ls -a<br>显示所有文件</li>
<li>ls -h<br>以便于阅读的方式显示</li>
<li>ls -S<br>按照文件大小排序</li>
</ul>
<h3 id="vi"><a href="#vi" class="headerlink" title="vi"></a>vi</h3><ul>
<li>:set nu<br>显示行号</li>
<li>:set nonu<br>隐藏行号</li>
<li>0<br>移动光标到行首</li>
<li>$<br>移动光标到行尾</li>
<li>gg<br>移动光标到内容开头</li>
<li>G<br>移动光标到内容结束</li>
<li>dd<br>删除行</li>
<li>x<br>删除一个字符</li>
<li>r<br>替换一个字符</li>
<li>R<br>一直替换</li>
<li>u<br>撤销上次操作</li>
<li>10 j<br>向下移动光标10行</li>
<li>/c[ok]\{1\}mplete<br>查找complete</li>
</ul>
<p>(完)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/262671d24b2e/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="oynix">
      <meta itemprop="description" content="避免没有计划的行动">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="oynix">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/262671d24b2e/" class="post-title-link" itemprop="url">持续集成与自动化测试 Continuous Integration，CI</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-05-29 13:00:32" itemprop="dateCreated datePublished" datetime="2018-05-29T13:00:32+08:00">2018-05-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>426</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>所谓持续集成与自动化，是指用机器替代人工持续不间断地集成代码，让产品可以快速迭代，同时还能保证代码质量。一个完整的持续集成环境需要Jenkins与Git、Gerrit一起配合，才能发挥出它最强大的功能。一般来说，在开发者Push代码后会首先到Gerrit进行代码Review。Review分为两部分，一部分是使用程序的自动化Review，主要是通过静态代码检测工具来进行代码质量分析（比如Sonar、CheckStyle、FindBugs等）；另一部分是人工Review，主要检测代码的运行逻辑，当Review完毕后，通过Git hook、Jenkins完成代码的自动拉取、编译和部署，最后通过自动化测试工具完成测试用例，并生成相应的测试报表。这样一整个测试流程需要人工来做的也就是人工代码Review部分，而其他部分全部通过自动化来实现，甚至可以在半夜对程序进行不间断Monkey测试，测试稳定性和潜在问题。</p>
</blockquote>
<p><strong>摘自《Android群英传：神兵利器》</strong></p>
<p>(完)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/d71d19b7fe7b/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="oynix">
      <meta itemprop="description" content="避免没有计划的行动">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="oynix">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/d71d19b7fe7b/" class="post-title-link" itemprop="url">Java继承机制的弊端</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-05-22 19:52:03" itemprop="dateCreated datePublished" datetime="2018-05-22T19:52:03+08:00">2018-05-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>转载，原文链接:<a target="_blank" rel="noopener" href="http://www.sunxin.org/forum/thread/20672.html#">http://www.sunxin.org/forum/thread/20672.html#</a> </p>
<p>为什么Java中继承多数是有害的 </p>
<p>大多数好的设计者象躲避瘟疫一样来避免使用实现继承(<code>extends</code> 关系)。实际上80%的代码应该完全用<code>interface</code>写,而不是通过<code>extends</code>。Java设计模式一书详细阐述了怎样用接口继承代替实现继承。这篇文章描述设计者为什么会这么作。 </p>
<p><code>Extends</code>是有害的;也许对于<em>Charles Manson</em>这个级别的不是,但是足够糟糕的它应该在任何可能的时候被避开。JAVA设计模式一书花了很大的部分讨论用<code>interface</code>继承代替实现继承。 </p>
<p>好的设计者在他的代码中,大部分用<code>interface</code>,而不是具体的基类。本文讨论为什么设计者会这样选择,并且也介绍一些基于<code>interface</code>的编程基础。 </p>
<ul>
<li>接口(<code>Interface</code>)和类(<code>Class</code>)? </li>
</ul>
<p>一次,我参加一个Java用户组的会议。在会议中,<em>Jams Gosling</em>(Java之父)做发起人讲话。在那令人难忘的Q&amp;A部分中,有人问他:如果你重新构造Java,你想改变什么?。我想抛弃classes他回答。在笑声平息后,它解释说,真正的问题不是由于class本身,而是实现继承(<code>extends</code>) 关系。接口继承(<code>implements</code>关系)是更好的。你应该尽可能的避免实现继承。 </p>
<ul>
<li>失去了灵活性 </li>
</ul>
<p>为什么你应该避免实现继承呢?第一个问题是明确的使用具体类名将你固定到特定的实现,给底层的改变增加了不必要的困难。 </p>
<p>在当前的敏捷编程方法中,核心是并行的设计和开发的概念。在你详细设计程序前,你开始编程。这个技术不同于传统方法的形式—-传统的方式是设计应该在编码开始前完成—-但是许多成功的项目已经证明你能够更快速的开发高质量代码,相对于传统的按部就班的方法。但是在并行开发的核心是主张灵活性。你不得不以某一种方式写你的代码以至于最新发现的需求能够尽可能没有痛苦的合并到已有的代码中。 </p>
<p>胜于实现你也许需要的特征,你只需实现你明确需要的特征,而且适度的对变化的包容。如果你没有这种灵活,并行的开发,那简直不可能。 </p>
<p>对于<code>Inteface</code>的编程是灵活结构的核心。为了说明为什么,让我们看一下当使用它们的时候,会发生什么。考虑下面的代码: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">f() &#123; </span><br><span class="line">	LinkedList list = <span class="keyword">new</span> LinkedList(); </span><br><span class="line">	g(list); </span><br><span class="line">&#125; </span><br><span class="line">g(LinkedList list) &#123; </span><br><span class="line">	list.add( ... ); </span><br><span class="line">	g2(list) ;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>假设一个对于快速查询的需求被提出,以至于这个<code>LinkedList</code>不能够解决。你需要用<code>HashSet</code>来代替它。在已有代码中,变化不能够局部化,因为你不仅仅需要修改<code>f()</code>也需要修改<code>g()</code>(它带有<code>LinkedList</code>参数),并且还有<code>g()</code>把列表传递给的任何代码。像下面这样重写代码: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">f() &#123; </span><br><span class="line">	Collection list = <span class="keyword">new</span> LinkedList(); </span><br><span class="line">	g(list); </span><br><span class="line">&#125; </span><br><span class="line">g(Collection list) &#123; </span><br><span class="line">	list.add(...); </span><br><span class="line">	g2(list);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>这样修改Linked list成hash,可能只是简单的用new HashSet()代替new LinkedList()。就这样。没有其他的需要修改的地方。 </p>
<p>作为另一个例子,比较下面两段代码: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">f() &#123; </span><br><span class="line">	Collection c = <span class="keyword">new</span> HashSet(); </span><br><span class="line">	<span class="comment">//... </span></span><br><span class="line">	g( c ); </span><br><span class="line">&#125; </span><br><span class="line">g(Collection c) &#123; </span><br><span class="line">	<span class="keyword">for</span>(Iterator i = c.iterator(); i.hasNext()) </span><br><span class="line">		do_something_with(i.next()); </span><br><span class="line">&#125; </span><br><span class="line">f2() &#123; </span><br><span class="line">	Collection c = <span class="keyword">new</span> HashSet(); </span><br><span class="line">	<span class="comment">//... </span></span><br><span class="line">	g2( c.iterator() ); </span><br><span class="line">&#125; </span><br><span class="line">g2(Iterator i) &#123; </span><br><span class="line">	<span class="keyword">while</span>(i.hasNext()) </span><br><span class="line">		do_something_with(i.next()); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p><code>g2()</code>方法现在能够遍历<code>Collection</code>的派生,就像你能够从<code>Map</code>中得到的键值对。事实上,你能够写<code>iterator</code>,它产生数据,代替遍历一个<code>Collection</code>。你能够写<code>iterator</code>,它从测试的框架或者文件中得到信息。这会有巨大的灵活性。 </p>
<ul>
<li>耦合 </li>
</ul>
<p>对于实现继承,一个更加关键的问题是耦合—令人烦躁的依赖,就是那种程序的一部分对于另一部分的依赖。全局变量提供经典的例子,证明为什么强耦合会引起麻烦。例如,如果你改变全局变量的类型,那么所有用到这个变量的函数也许都被影响,所以所有这些代码都要被检查,变更和重新测试。而且,所有用到这个变量的函数通过这个变量相互耦合。也就是,如果一个变量值在难以使用的时候被改变,一个函数也许就不正确的影响了另一个函数的行为。这个问题显著的隐藏于多线程的程序。 </p>
<p>作为一个设计者,你应该努力最小化耦合关系。你不能一并消除耦合,因为从一个类的对象到另一个类的对象的方法调用是一个松耦合的形式。你不可能有一个程序,它没有任何的耦合。然而,你能够通过遵守OO规则,最小化一定的耦合(最重要的是,一个对象的实现应该完全隐藏于使用他的对象)。例如,一个对象的实例变量(不是常量的成员域),应该总是<code>private</code>。我意思是某段时期的,无例外的,不断的。(你能够偶尔有效地使用<code>protected</code>方法,但是<code>protected</code>实例变量是可憎的事)同样的原因你应该不用get/set函数—他们对于是一个域公用只是使人感到过于复杂的方式(尽管返回修饰的对象而不是基本类型值的访问函数是在某些情况下是由原因的,那种情况下,返回的对象类是一个在设计时的关键抽象)。 </p>
<p>这里,我不是书生气。在我自己的工作中,我发现一个直接的相互关系在我OO方法的严格之间,快速代码开发和容易的代码实现。无论什么时候我违反中心的OO原则,如实现隐藏,我结果重写那个代码(一般因为代码是不可调试的)。我没有时间重写代码,所以我遵循那些规则。我关心的完全实用?我对干净的原因没有兴趣。 </p>
<ul>
<li>脆弱的基类问题 </li>
</ul>
<p>现在,让我们应用耦合的概念到继承。在一个用<code>extends</code>的继承实现系统中,派生类是非常紧密的和基类耦合,当且这种紧密的连接是不期望的。设计者已经应用了绰号脆弱的基类问题去描述这个行为。基础类被认为是脆弱的是,因为你在看起来安全的情况下修改基类,但是当从派生类继承时,新的行为也许引起派生类出现功能紊乱。你不能通过简单的在隔离下检查基类的方法来分辨基类的变化是安全的;而是你也必须看(和测试)所有派生类。而且,你必须检查所有的代码,它们也用在基类和派生类对象中,因为这个代码也许被新的行为所打破。一个对于基础类的简单变化可能导致整个程序不可操作。 </p>
<p>让我们一起检查脆弱的基类和基类耦合的问题。下面的类<code>extends</code>了Java的<code>ArrayList</code>类去使它像一个<code>stack</code>来运转: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span> <span class="keyword">extends</span> <span class="title">ArrayList</span> </span>&#123; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> stack_pointer = <span class="number">0</span>; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">( Object article )</span> </span>&#123; </span><br><span class="line">		add( stack_pointer++, article ); </span><br><span class="line">	&#125; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">pop</span><span class="params">()</span> </span>&#123; </span><br><span class="line">		<span class="keyword">return</span> remove( --stack_pointer ); </span><br><span class="line">	&#125; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push_many</span><span class="params">( Object[] articles )</span> </span>&#123; </span><br><span class="line">		<span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; articles.length; ++i ) </span><br><span class="line">			push( articles[i] ); </span><br><span class="line">	&#125; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>甚至一个象这样简单的类也有问题。思考当一个用户平衡继承和用<code>ArrayList</code>的<code>clear()</code>方法去弹出堆栈时: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Stack a_stack = <span class="keyword">new</span> Stack(); </span><br><span class="line">a_stack.push(<span class="string">&quot;1&quot;</span>); </span><br><span class="line">a_stack.push(<span class="string">&quot;2&quot;</span>); </span><br><span class="line">a_stack.clear(); </span><br></pre></td></tr></table></figure>
<p>这个代码成功编译,但是因为基类不知道关于<code>stack</code>指针堆栈的情况,这个<code>stack</code>对象当前在一个未定义的状态。下一个对于<code>push()</code>调用把新的项放入索引2的位置。(<code>stack_pointer</code>的当前值),所以<code>stack</code>有效地有三个元素-下边两个是垃圾。(Java的stack类正是有这个问题,不要用它). </p>
<p>对这个令人讨厌的继承的方法问题的解决办法是为<code>Stack</code>覆盖所有的<code>ArrayList</code>方法,那能够修改数组的状态,所以覆盖正确的操作<code>Stack</code>指针或者抛出一个例外。(<code>removeRange()</code>方法对于抛出一个例外一个好的候选方法)。 </p>
<p>这个方法有两个缺点。第一,如果你覆盖了所有的东西,这个基类应该真正的是一个<code>interface</code>,而不是一个<code>class</code>。如果你不用任何继承方法,在实现继承中就没有这一点。第二,更重要的是,你不能够让一个<code>stack</code>支持所有的<code>ArrayList</code>方法。例如,令人烦恼的<code>removeRange()</code>没有什么作用。唯一实现无用方法的合理的途径是使它抛出一个例外,因为它应该永远不被调用。这个方法有效的把编译错误成为运行错误。不好的方法是,如果方法只是不被定义,编译器会输出一个方法未找到的错误。如果方法存在,但是抛出一个例外,你只有在程序真正的运行时,你才能够发现调用错误。 </p>
<p>对于这个基类问题的一个更好的解决办法是封装数据结构代替用继承。这是新的和改进的Stack的版本: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span> </span>&#123; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> stack_pointer = <span class="number">0</span>; </span><br><span class="line">	<span class="keyword">private</span> ArrayList the_data = <span class="keyword">new</span> ArrayList(); </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">( Object article )</span> </span>&#123; </span><br><span class="line">		the_data.add( stack_poniter++, article ); </span><br><span class="line">	&#125; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">pop</span><span class="params">()</span> </span>&#123; </span><br><span class="line">		<span class="keyword">return</span> the_data.remove( --stack_pointer ); </span><br><span class="line">	&#125; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push_many</span><span class="params">( Object[] articles )</span> </span>&#123; </span><br><span class="line">		<span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; o.length; ++i ) </span><br><span class="line">			push( articles[i] ); </span><br><span class="line">	&#125; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>到现在为止,一直都不错,但是考虑脆弱的基类问题,我们说你想要在<code>stack</code>创建一个变量, 用它在一段周期内跟踪最大的堆栈尺寸。一个可能的实现也许象下面这样: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Monitorable_stack</span> <span class="keyword">extends</span> <span class="title">Stack</span> </span>&#123; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> high_water_mark = <span class="number">0</span>; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> current_size; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">( Object article )</span> </span>&#123; </span><br><span class="line">		<span class="keyword">if</span>( ++current_size &gt; high_water_mark ) </span><br><span class="line">			high_water_mark = current_size; </span><br><span class="line">		<span class="keyword">super</span>.push( article ); </span><br><span class="line">	&#125; </span><br><span class="line">	<span class="function">publish Object <span class="title">pop</span><span class="params">()</span> </span>&#123; </span><br><span class="line">		--current_size; </span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.pop(); </span><br><span class="line">	&#125; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maximum_size_so_far</span><span class="params">()</span> </span>&#123; </span><br><span class="line">		<span class="keyword">return</span> high_water_mark; </span><br><span class="line">	&#125; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>这个新类运行的很好,至少是一段时间。不幸的是,这个代码发掘了一个事实,<code>push_many()</code>通过调用<code>push()</code>来运行。首先,这个细节看起来不是一个坏的选择。它简化了代码,并且你能够得到<code>push()</code>的派生类版本,甚至当<code>Monitorable_stack</code>通过Stack的参考来访问的时候,以至于<code>high_water_mark</code>能够正确的更新。 </p>
<p>(完)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/5483a3584872/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="oynix">
      <meta itemprop="description" content="避免没有计划的行动">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="oynix">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/5483a3584872/" class="post-title-link" itemprop="url">Android使用netty框架配置SSL适配7.0以上的系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-05-18 17:00:11" itemprop="dateCreated datePublished" datetime="2018-05-18T17:00:11+08:00">2018-05-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近项目在使用的netty框架加上了SSL安全设置，SSL可单项验证也可双向验证，我使用的是双向验证，即Client验证Server同时Server也验证Client。<br>以下只说明Client（Android）端的实现方式。</p>
<ul>
<li>首先需要两个文件，<code>client.p12</code>和<code>cacert.pem</code>，由服务器端提供。</li>
<li>使用java的<code>keytool</code>工具将<code>cacert.pem</code>导入到keystore中<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> keytool -import -trustcacerts -keystore /Users/xxx/server.bks -file /Users/xxx/cacert.pem -storetype BKS -provider org.bouncycastle.jce.provider.BouncyCastleProvider</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>记住这个命令执行后要求输入的密码。<br><em>（其中的org.bouncycastle.jce.provider.BouncyCastleProvider如何添加使用自行百度即可。）</em></p>
<ul>
<li><p>现在已经有了两个文件<code>client.p12</code>和<code>server.bks</code></p>
</li>
<li><p>准备完成，下面进行java实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> SSLContext <span class="title">createSSLContext</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        SSLContext sslContext = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">	        <span class="comment">// 该密码为生成client.p12时设置的密码</span></span><br><span class="line">            String keyPassword = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="comment">// 该密码为生成server.bks时设置的密码</span></span><br><span class="line">            String trustPassword = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// key store manager</span></span><br><span class="line">            KeyStore keyStore = KeyStore.getInstance(<span class="string">&quot;PKCS12&quot;</span>);</span><br><span class="line">            InputStream keyInput = context.getResources().openRawResource(R.raw.client);</span><br><span class="line">            keyStore.load(keyInput, keyPassword.toCharArray());</span><br><span class="line">            KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());</span><br><span class="line">            keyManagerFactory.init(keyStore, keyPassword.toCharArray());</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// trust store manager</span></span><br><span class="line">            KeyStore trustStore = KeyStore.getInstance(<span class="string">&quot;BKS&quot;</span>);</span><br><span class="line">            InputStream trustInput = context.getResources().openRawResource(R.raw.server);</span><br><span class="line">            trustStore.load(trustInput, trustPassword.toCharArray());</span><br><span class="line">            TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());</span><br><span class="line">            trustManagerFactory.init(trustStore);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// assemble</span></span><br><span class="line">            sslContext = SSLContext.getInstance(<span class="string">&quot;TLS&quot;</span>);</span><br><span class="line">            sslContext.init(keyManagerFactory.getKeyManagers(), trustManagerFactory.getTrustManagers(), <span class="keyword">null</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sslContext;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>接下来配置netty中的SSL</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClientInitializer</span> <span class="keyword">extends</span> <span class="title">ChannelInitializer</span>&lt;<span class="title">SocketChannel</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> SSLContext mSslContext;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ClientInitializer</span><span class="params">(SSLContext sslContext)</span> </span>&#123;</span><br><span class="line">            mSslContext = sslContext;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            ChannelPipeline pipeline = ch.pipeline();</span><br><span class="line">            SSLEngine sslEngine = mSslContext.createSSLEngine();</span><br><span class="line">            sslEngine.setUseClientMode(<span class="keyword">true</span>);</span><br><span class="line">            pipeline.addFirst(<span class="string">&quot;ssl&quot;</span>, <span class="keyword">new</span> SslHandler(sslEngine));</span><br><span class="line">            pipeline.addLast(<span class="string">&quot;decoder&quot;</span>, <span class="keyword">new</span> ClientDecoder());</span><br><span class="line">            pipeline.addLast(<span class="string">&quot;encoder&quot;</span>, <span class="keyword">new</span> ClientEncoder());</span><br><span class="line">            pipeline.addLast(<span class="string">&quot;handler&quot;</span>, <span class="keyword">new</span> ClientHandler());</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>至此，所有工作就完成了，以上标准配置在android7.0以下的机器上均可正常运行，但是一旦运行到7.0及以上的机器上就会报错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Trust anchor <span class="keyword">for</span> certification path not found.</span><br><span class="line">        at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:<span class="number">374</span>)</span><br><span class="line">        at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:<span class="number">209</span>)</span><br><span class="line">        at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:<span class="number">478</span>)</span><br><span class="line">        at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:<span class="number">433</span>)</span><br><span class="line">        at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:<span class="number">290</span>)</span><br><span class="line">        at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:<span class="number">240</span>)</span><br><span class="line">        at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:<span class="number">282</span>)</span><br><span class="line">        at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:<span class="number">177</span>)</span><br><span class="line">        at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:<span class="number">271</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<p>经过一番查询验证，在官网上找到了解决办法，<a target="_blank" rel="noopener" href="https://developer.android.google.cn/training/articles/security-ssl#CommonProblems">原链接</a>-不需翻墙即可访问。</p>
<p><strong>解决方式如下</strong></p>
<ul>
<li>和服务器端再要一个文件<code>server.crt</code>。</li>
<li>准备完成，下面修改java实现<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> SSLContext <span class="title">createSSLContext</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        SSLContext sslContext = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String keyPassword = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">             <span class="comment">// key store manager</span></span><br><span class="line">            KeyStore keyStore = KeyStore.getInstance(<span class="string">&quot;PKCS12&quot;</span>);</span><br><span class="line">            InputStream keyInput = context.getResources().openRawResource(R.raw.client);</span><br><span class="line">            keyStore.load(keyInput, keyPassword.toCharArray());</span><br><span class="line">            KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());</span><br><span class="line">            keyManagerFactory.init(keyStore, keyPassword.toCharArray());</span><br><span class="line">            KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());</span><br><span class="line">            keyManagerFactory.init(keyStore, keyPassword.toCharArray());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// trust store manager</span></span><br><span class="line">            CertificateFactory cf = CertificateFactory.getInstance(<span class="string">&quot;X509&quot;</span>);</span><br><span class="line">            InputStream caInput = context.getResources().openRawResource(R.raw.server);</span><br><span class="line">            Certificate ca;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ca = cf.generateCertificate(caInput);</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                caInput.close();</span><br><span class="line">            &#125;</span><br><span class="line">            KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());</span><br><span class="line">            trustStore.load(<span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">            trustStore.setCertificateEntry(<span class="string">&quot;CA&quot;</span>, ca);</span><br><span class="line">            TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());</span><br><span class="line">            trustManagerFactory.init(trustStore);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// assemble</span></span><br><span class="line">            sslContext = SSLContext.getInstance(<span class="string">&quot;TLS&quot;</span>);</span><br><span class="line">            sslContext.init(keyManagerFactory.getKeyManagers(), trustManagerFactory.getTrustManagers(), <span class="keyword">null</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sslContext;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>只需要修改<code>trust store</code>的创建方式，其他不需要改动。经过以上修改，程序在所有版本的机器上都可以正常运行了！开心</strong></p>
<p>(完)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/c9ea6aa5bbde/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="oynix">
      <meta itemprop="description" content="避免没有计划的行动">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="oynix">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/c9ea6aa5bbde/" class="post-title-link" itemprop="url">MySql的modify和change区别</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-04-27 13:32:04" itemprop="dateCreated datePublished" datetime="2018-04-27T13:32:04+08:00">2018-04-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySql/" itemprop="url" rel="index"><span itemprop="name">MySql</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>405</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>相同点：都是用来改变column的属性，change和modify执行成功后都会用本次设置的属性替换column原属性，请注意是【替换】；</li>
<li>不同点：重命名只能使用change</li>
</ul>
<p>格式（mysql默认不区分大小写）</p>
<p> 1 change</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter table table_name change current_column_name new_column_name type extra;</span><br><span class="line">// for example.（如果是改名字需要把column原属性都挂上，因为是替换）</span><br><span class="line">alter table user change id userid int(11) not null auto_increment;</span><br></pre></td></tr></table></figure>
<p> 2 modify</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter table table_name modify column_name type extra;</span><br><span class="line">// for example</span><br><span class="line">alter table user modify id int(11) not null auto_increment;</span><br></pre></td></tr></table></figure>

<p>(完)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/23aff262eba5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="oynix">
      <meta itemprop="description" content="避免没有计划的行动">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="oynix">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/23aff262eba5/" class="post-title-link" itemprop="url">「巧用Gradle构建Android应用」读书整理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-04-23 22:37:30" itemprop="dateCreated datePublished" datetime="2018-04-23T22:37:30+08:00">2018-04-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">读书笔记</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>周末看完了「巧用Gradle构建Android应用」，故将新认知整理在此以便以后供自己以及有需要的人查看。</p>
<p>Gradle</p>
<ul>
<li><p>Gradle构建过程实际上是执行DAG(Directed Acyclic Graph，有向无环图)，允许定义自己的task并插入到其中。<br>build.gradle中Android块时Android DSL()的入口。</p>
</li>
<li><p>依赖的语法</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//完整语法 (禁用传递依赖)</span></span><br><span class="line">testCompile <span class="attr">group:</span> <span class="string">&#x27;junit&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;junit&#x27;</span>, <span class="attr">version:</span> <span class="string">&#x27;4.12&#x27;</span>， <span class="attr">transitive:</span> <span class="literal">false</span> </span><br><span class="line"><span class="comment">//排除依赖</span></span><br><span class="line">androidTestCompile(<span class="string">&#x27;org.splckframeword:spock-core:1.0-groovy-2.4&#x27;</span>) &#123;</span><br><span class="line">	exclude <span class="attr">group:</span> <span class="string">&#x27;org.codehaus.groovy&#x27;</span></span><br><span class="line">	exclude <span class="attr">group:</span> <span class="string">&#x27;junit&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>配置仓库</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">repositories &#123;</span><br><span class="line">	maven &#123;</span><br><span class="line">	<span class="comment">// 其中的username值和password值可以写在gradle.properties或者在执行gradlew命令时以参数输入</span></span><br><span class="line">	<span class="comment">// ./gradlew -Puser=user_from_pFlag -Ppass=pass_from_pFlag</span></span><br><span class="line">		username <span class="string">&#x27;username&#x27;</span></span><br><span class="line">		password <span class="string">&#x27;password&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">	url <span class="string">&#x27;http://repo.mycompany.com/maven2&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 还可以在ext块中配置</span></span><br><span class="line">ext &#123;</span><br><span class="line">	<span class="keyword">if</span> (!project.hasProperty(<span class="string">&#x27;user&#x27;</span>)) &#123;</span><br><span class="line">		<span class="keyword">def</span> username = <span class="string">&#x27;alice&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (!project.hasProperty(<span class="string">&#x27;pass&#x27;</span>)) &#123;</span><br><span class="line">		<span class="keyword">def</span> password = <span class="string">&#x27;passpass&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>升级Gradle版本</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法一</span></span><br><span class="line">task wrapper(<span class="attr">type:</span> Wrapper) &#123;</span><br><span class="line">	gradleVersion = <span class="number">2.12</span></span><br><span class="line">&#125;</span><br><span class="line">./gradlew wrapper</span><br><span class="line"><span class="comment">// 方法二：直接修改gradle-wrapper.properties文件的distributionUrl属性。</span></span><br></pre></td></tr></table></figure></li>
<li><p>签名</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">	<span class="comment">// ...other section...</span></span><br><span class="line">	signingConfigs &#123;</span><br><span class="line">		release &#123;</span><br><span class="line">			keyAlias <span class="string">&#x27;my_alias&#x27;</span></span><br><span class="line">			keyPassword <span class="string">&#x27;password&#x27;</span></span><br><span class="line">			storeFile file(<span class="string">&#x27;/Users/kousen/keystores/myapp.ketstore&#x27;</span>)</span><br><span class="line">			storePassword <span class="string">&#x27;password&#x27;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 同样，密码可以放到gradle.properties中，或者以gradlew的参数输入</span></span><br></pre></td></tr></table></figure></li>
<li><p>构建类型</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">buildTypes &#123;</span><br><span class="line"><span class="comment">// 加后缀区分可同时安装在同一设备上</span></span><br><span class="line">	debug &#123;</span><br><span class="line">		applicationIdSuffix <span class="string">&#x27;.debug&#x27;</span></span><br><span class="line">		versionNameSuffix <span class="string">&#x27;-debug&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>产品定制&amp;纬度</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">	productFlavors &#123;</span><br><span class="line">		arrogant &#123;</span><br><span class="line">			dimension <span class="string">&#x27;attitude&#x27;</span></span><br><span class="line">			applicationId <span class="string">&#x27;com.oreilly.helloword.arrg&#x27;</span></span><br><span class="line">		&#125;</span><br><span class="line">		friendly &#123;</span><br><span class="line">			dimension <span class="string">&#x27;attitude&#x27;</span></span><br><span class="line">			applicationId <span class="string">&#x27;com.oreilly.helloword.fund&#x27;</span></span><br><span class="line">		&#125;</span><br><span class="line">		stark &#123;</span><br><span class="line">			dimension <span class="string">&#x27;client&#x27;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>自定义任务。Grale的DSL API已经存在很多任务，如Copy、Wrapper和Exec等，这些任务可以简单地设置属性然后使用。比如Copy任务所包含的from和into属性。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 复制任务</span></span><br><span class="line">task copyApks(<span class="attr">type:</span> Copy) &#123;</span><br><span class="line">	from(<span class="string">&quot;$buildDir/outputs/apk&quot;</span>) &#123;</span><br><span class="line">		exclude <span class="string">&#x27;**/*unsigned.apk&#x27;</span>, <span class="string">&#x27;**/*unaligned.apk&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">	into <span class="string">&#x27;../apks&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 显示所有可用任务的变种。这个任务中无论在doLast之前还是之后的所有事情都是在配置阶段执行，</span></span><br><span class="line"><span class="comment">// doLast块中的代码在运行阶段执行</span></span><br><span class="line"><span class="comment">// applicationVariants属性只针对com.android.application插件有效</span></span><br><span class="line"><span class="comment">// libraryVariants属性只针对com.android.library插件有效</span></span><br><span class="line">task printVariantNames() &#123;</span><br><span class="line">	doLast &#123;</span><br><span class="line">		android.applicationVariants.all &#123; variant -&gt;</span><br><span class="line">			println variant.name</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 执行安装所有应用的变种的任务</span></span><br><span class="line"><span class="comment">// dependsOn属性显示这是配置阶段的一部分，而不是运行阶段。每一个变种名字都被首字母大写了</span></span><br><span class="line"><span class="comment">// 并且相应的安装任务也被添加到installDebugFlavors任务的一个依赖</span></span><br><span class="line">task installDebugFlavors() &#123;</span><br><span class="line">	android.applicationVariants.all &#123; v -&gt;</span><br><span class="line">		<span class="keyword">if</span> (v.name.endWiths(<span class="string">&#x27;Debug&#x27;</span>)) &#123;</span><br><span class="line">			String name = v.name.capitalize()</span><br><span class="line">			dependsOn <span class="string">&quot;install$name&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>延长ADB超时时长</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 30秒</span></span><br><span class="line">android &#123;</span><br><span class="line">	adbOptions &#123;</span><br><span class="line">		timeOutInMs = <span class="number">30</span> * <span class="number">1000</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>添加自定义任务到构建过程</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基于assembleDebug的依赖意味着在运行copy任务之前所有调试APK都会被生成。</span></span><br><span class="line">task copyApks (<span class="attr">type:</span> Copy, <span class="attr">dependsOn:</span> assembleDebug) &#123;</span><br><span class="line">	from(<span class="string">&quot;$buildDir/outputs/apk&quot;</span>) &#123;</span><br><span class="line">		exclude <span class="string">&#x27;**/*unsigned.apk&#x27;</span>, <span class="string">&#x27;**/*unsigned.apk&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">	into <span class="string">&#x27;../apks&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果想要在每次构建的时候都运行copyApks任务，将其作为build任务的一个依赖</span></span><br><span class="line">build.dependsOn copyApks</span><br></pre></td></tr></table></figure></li>
<li><p>排除任务</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; ./gradlw build -x lint</span><br><span class="line"><span class="comment">// Gradle运行时，其组装了一个task graph，通过gradle获得这个图的饮用，所有对这个图的操纵都需要发生</span></span><br><span class="line"><span class="comment">// 在其构建出来之后，所以需要使用whenReady属性</span></span><br><span class="line">gradle.taskGraph.whenReady &#123; graph -&gt;</span><br><span class="line">	<span class="keyword">if</span> (project.hasProperty(<span class="string">&#x27;nolint&#x27;</span>)) &#123;</span><br><span class="line">		graph.allTask.findAll &#123;</span><br><span class="line">			it.name ==<span class="regexp">~/lint.*/</span>&#125;*.enabled = <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>性能</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// gradle.properties</span></span><br><span class="line"><span class="comment">// 守护进程</span></span><br><span class="line">org.gradle.daemon=<span class="literal">true</span></span><br><span class="line"><span class="comment">// 按需配置设置</span></span><br><span class="line">org.gradle.configureondemand=<span class="literal">true</span></span><br><span class="line"><span class="comment">// 选择JVM设置 Xmx最大内存 Xms初始内存 XX:MaxPermSize永代久空间 </span></span><br><span class="line"><span class="comment">// HeapDumpOnOutOfMemoryError发生时，将堆中情况导出到一个文件中</span></span><br><span class="line">org.gradle.jvmargs=-Xmx2048m -<span class="attr">XX:</span>MaxPermSize=<span class="number">512</span>m -<span class="attr">XX:</span>+HeapDumpOnOutOfMemoryError</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用dex选项</span></span><br><span class="line">dexOptions &#123;</span><br><span class="line">	incremental <span class="literal">true</span></span><br><span class="line">	javaMaxHeapSize <span class="string">&#x27;2g&#x27;</span></span><br><span class="line">	jumboMode = <span class="literal">true</span><span class="comment">//运载dex文件中出现的大量字符串，可能需要配置ProdGuard</span></span><br><span class="line">	preDexLibraries = <span class="literal">true</span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li>
</ul>
<p>(完)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">oynix</p>
  <div class="site-description" itemprop="description">避免没有计划的行动</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">43</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">44</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/oynix" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;oynix" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:oynix@foxmail.com" title="E-Mail → mailto:oynix@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2017 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">oynix</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">114k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:43</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>


    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
